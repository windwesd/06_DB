-- 함수 : 컬럼값 | 지정된값을 읽어 연산한 결과를 반환하는 것

-- 단일행 함수 : N개의 행의 컬럼 값을 전달하여 N개의 결과가 반환

-- 그룹 함수  : N개의 행의 컬럼 값을 전달하여 1개의 결과가 반환
--			  (그룹의 수가 늘어나면 그룹의 수 만큼 결과를 반환)

-- 함수는 SELECT절, WHERE절, ORDER BY절
--      GROUP BY절, HAVING절에서 사용 가능



/********************* 단일행 함수 *********************/

-- <문자열 관련 함수>

-- LENGTH(문자열|컬럼명) : 문자열의 길이 반환
SELECT 'HELLO WORLD', LENGTH ('HELLO WORLD')
FROM DUAL; -- DUMMY TABLE(가상/가짜 테이블)

-- EMPLOYEE 테이블에서
-- 사원명, 이메일, 이메일 길이 조회
-- 단, 이메일 길이가 12 이하인 행만 
-- 이메일 길이 오름차순 조회 
SELECT EMP_NAME, EMAIL, LENGTH(EMAIL)
FROM EMPLOYEE
WHERE LENGTH(EMAIL) <= 12
ORDER BY LENGTH(EMAIL) ASC;

-----------------------------------------------------

-- INSTR(문자열 | 컬럼명, '찾을 문자열' [, 찾을 시작 위치 [, 순번]]) 

-- 찾을 시작 위치부터 지정된 순번째 찾은 문자열의 시작 위치를 반환
SELECT 'AABAACAABBAA', INSTR('AABAACAABBAA', 'B')
FROM DUAL; -- 3 (INDEX아님, 1부터 시작하는 COUNT 개념)

-- 문자열에서 5번 부터 검색 시작해서 처음 찾은 'B'의 위치 조회

SELECT 'AABAACAABBAA', INSTR('AABAACAABBAA', 'B', 5)
FROM DUAL;

-- 문자열에서 5번 부터 검색 시작해서 두번째로 찾은 'B'의 위치 조회

SELECT 'AABAACAABBAA', INSTR('AABAACAABBAA', 'B', 5, 2)
FROM DUAL;

-----------------------------------------------------

-- SUBSTR(문자열 | 컬럼명, 시작위치 [,길이])

-- 문자열을 시작 위치부터 지정된 깅리 만큼 짤라내서 반환
-- 길이 미작성 시 시작 위치 부터 끝까지 잘라내서 반환

-- 시작 위치 + 길이 지정
SELECT SUBSTR('ABCDEFG', 2,3)
FROM DUAL;

-- 시작위치만 지정
SELECT SUBSTR('ABCDEFG' , 4)
FROM DUAL;

-- SUBSTR() + INSTR() 같이 사용하기

-- EMPLOYEE 테이블에서 
-- 사원명, 이메일 아이디 (@ 앞에까지 문자열)를
-- 이메일 아이디 오름차순으로 조회
 SELECT EMP_NAME, 
 				SUBSTR(EMAIL, 1, INSTR(EMAIL, '@')-1) "이메일 아이디"
 FROM EMPLOYEE
 ORDER BY "이메일 아이디" ASC;
 
-----------------------------------------------------

-- TRIM([ [옵션] 문자열 | 컬럼명 FROM ] 문자열 | 컬럼명)
-- 주어진 문자열의 앞쪽|뒤쪽|양쪽에 존재하는 지정된 문자열을 제거

-- 옵션 : LEADING(앞쪽), TRAILING(뒤쪽), BOTH(양쪽, 기본값)

-- 문자열 앞/뒤/양쪽 공백 제거
SELECT '   기  준   ',
	TRIM(LEADING  ' ' FROM '   기  준   '),
	TRIM(TRAILING ' ' FROM '   기  준   '),
	TRIM(BOTH     ' ' FROM '   기  준   ')
FROM DUAL;

-- 문자열 앞/뒤/양쪽 특정 문자 제거
SELECT '##@기  준@##',
	TRIM(LEADING  '#' FROM '##@기  준@##'),
	TRIM(TRAILING '#' FROM '##@기  준@##'),
	TRIM(BOTH     '#' FROM '##@기  준@##')
FROM DUAL;

-----------------------------------------------------

-- REPLACE(문자열 | 컬럼명, 찾을 문자열, 바꿀 문자열)

SELECT NATIONAL_NAME, REPLACE(NATIONAL_NAME, '한국', '대한민국')
FROM "NATIONAL";

-----------------------------------------------------
-----------------------------------------------------
-----------------------------------------------------

-- <숫자 관련 함수>

-- MOD(숫자 | 컬럼명, 나눌 값) : 결과로 나머지 반환
SELECT MOD(105, 100)
FROM DUAL;

-- ABS(숫자 | 컬럼명) : 절대 값
SELECT ABS(10), ABS(-10)
FROM DUAL;

-- CEIL(숫자 | 컬럼명) : 올림 -> 정수 형태로 반환
-- FLOOR(숫자 | 컬럼명) : 내림 -> 정수 형태로 반환
SELECT CEIL (1.1), FLOOR(1.9)
FROM DUAL;

-- ROUND(숫자 | 컬럼명 [, 소수점 위치]) : 반올림
-- 소수점 위치 지정 x : 소수점 첫째 자리에서 반올림 -> 정수 표현
-- 소수점 위치 지정 O
 -- 1) 양수 : 지정된 위치의 소수점 자리까지 표현
 -- 2) 음수 : 지정된 위치의 정수 자리까지 표현
SELECT 123.456,
			ROUND(123.456),
			ROUND(123.456, 0), --(0이 ROUND 기본값)
			ROUND(123.456, 1),
			ROUND(123.456, 2),
			ROUND(123.456, -1),
			ROUND(123.456, -2)
			
FROM DUAL;


-- TRUNC(숫자 | 컬럼명 [,소수점 위치]) : 버림 (잘라내기)
SELECT 123.456,
	TRUNC(123.456),
	TRUNC(123.456, 1) -- (둘쨰 자리부터 버림)
FROM DUAL;


-- 버림(TRUNC), 내림(FLOOR) 차이점
SELECT -123.5,
	TRUNC(-123.5),
	FLOOR(-123.5) 
FROM DUAL;


-----------------------------------------------------
-----------------------------------------------------
-----------------------------------------------------

-- <날짜 관련 함수>
-- SYSDATE : 현재 시간
-- SYSTIMESTAMP : 현재 시간 (ms 포함, 표준시간대)
-- CURRENT_DATE
-- CURRENT_TIMESTAMP










